{"version":3,"file":"translate.js","sources":["../lib/http/nodeHttpAdpater.ts","../lib/http/adapter.ts","../lib/engines/deeplx.ts","../lib/core/engine.ts","../plugins/vue/index.ts","../lib/core/translate.ts"],"sourcesContent":["import * as http from 'http'\nimport { Buffer } from 'buffer';\nimport { HtptClientResponseOption, HttpClientRequestMethod, HttpClientRequestOption, IHttpAdapter } from './adapter';\n\nexport default class NodeHttpAdapter implements IHttpAdapter {\n\n  send<T>(options: HttpClientRequestOption): Promise<HtptClientResponseOption<T>> {\n    return new Promise<HtptClientResponseOption<T>>((resolve, reject) => {\n\n      if (!options.url) {\n        return reject({\n          mesage: 'The request url is empty'\n        })\n      }\n\n      if (!options.method) {\n        return reject({\n          mesage: 'The request method is empty'\n        })\n      }\n\n      const urlInfo = new URL(URL.canParse(options.url) ? options.url : window.location.origin + options.url);\n\n      const _options = Object.assign(options, {\n        hostname: urlInfo.hostname || window.location.hostname,\n        port: urlInfo.port || 80,\n        path: urlInfo.pathname + urlInfo.search || '',\n      })\n\n      delete _options.url;\n\n      //创建请求示例\n      const _h = http.request(\n        _options,\n        (res: any) => {\n          //设置响应编码\n          res.setEncoding('utf8');\n\n          //监听数据响应\n          let _data: any;\n          res.on('data', (chunk: any) => {\n\n            if (!_data) return _data = chunk;\n            _data instanceof Buffer ? (_data.includes(chunk)) : (_data += chunk)\n\n          })\n\n          //监听响应结束\n          res.on('end', () => {\n\n            if ((res.headers['content-type'] || '').indexOf('application/json') >= 0) _data = JSON.parse(_data.toString() || '')\n\n            resolve({\n              code: res.statusCode || 500,\n              message: res.statusMessage,\n              data: _data\n            })\n          })\n\n\n        }\n      );\n\n      //错误拦截\n      _h.on('error', (e: any) => {\n        reject({\n          message: e.message\n        })\n      })\n\n      //添加内容到body\n      if (options.method == HttpClientRequestMethod.POST) {\n        _h.write(JSON.stringify(options.data))\n      }\n\n      //设置超时时间\n      if (!Number.isInteger(options.timeout) || Number(options.timeout) > 0) {\n        _h.setTimeout(options.timeout || 60000, () => {\n          reject({\n            message: 'time out'\n          })\n        })\n      }\n\n\n      //结束写入\n      _h.end();\n\n    });\n  }\n\n}","import XHRAdapter from './xhrAdapter';\nimport NodeHttpAdapter from './nodeHttpAdpater'\n\n/**\n * 请求方法\n */\nexport enum HttpClientRequestMethod {\n  GET = 'GET',\n  POST = 'POST'\n}\n\nexport interface HttpClientRequestDefaultOption {\n  timeout?: number\n}\n\n/**\n * 请求体配置属性\n */\nexport interface HttpClientRequestOption extends HttpClientRequestDefaultOption {\n  url?: string\n  method?: HttpClientRequestMethod | string\n  headers?: { [name: string]: string }\n  params?: any\n  data?: any\n}\n\n/**\n * 错误响应属性\n */\nexport interface HtptClientResponseError {\n  message?: string\n  code?: number | string\n}\n\n/**\n * 正常响应属性\n */\nexport interface HtptClientResponseOption<T> extends HtptClientResponseError {\n  data: T | null\n}\n\nexport interface IHttpAdapter {\n  send<T>(options: HttpClientRequestOption): Promise<HtptClientResponseOption<T>>\n}\n\n/**\n * 请求客户端接口\n */\ninterface IHttpClient {\n  get<T>(url: string, params?: any, options?: HttpClientRequestOption): Promise<HtptClientResponseOption<T>>\n  post<T>(url: string, data?: any, options?: HttpClientRequestOption): Promise<HtptClientResponseOption<T>>\n  request<T>(options: HttpClientRequestOption): Promise<HtptClientResponseOption<T>>\n\n}\n\nexport class HttpClientInstance implements IHttpClient {\n  private defaultOption: HttpClientRequestOption\n\n  constructor(options: HttpClientRequestOption) {\n    this.defaultOption = options\n  }\n\n  get<T>(url: string, params?: any, options?: HttpClientRequestOption | undefined): Promise<HtptClientResponseOption<T>> {\n    return this.request<T>(Object.assign(this.defaultOption, options, { url, method: HttpClientRequestMethod.GET, params }))\n  }\n\n  post<T>(url: string, data?: any, options?: HttpClientRequestOption | undefined): Promise<HtptClientResponseOption<T>> {\n    return this.request<T>(Object.assign(this.defaultOption, options, { url, method: HttpClientRequestMethod.POST, data }))\n  }\n\n  request<T>(options: HttpClientRequestOption): Promise<HtptClientResponseOption<T>> {\n    // const adapter = typeof XMLHttpRequest !== 'undefined' ? new XHRAdapter() : new NodeHttpAdapter();\n    const adapter = new NodeHttpAdapter();\n    return adapter.send<T>(Object.assign(this.defaultOption, options))\n  }\n}\n\nexport class HttpClient {\n  static create(options: HttpClientRequestDefaultOption): HttpClientInstance {\n    return new HttpClientInstance(options)\n  }\n}\n\nexport default HttpClient","import { ITranslateEngine, LanguageMapItemInfo, TranslateConfigOption, TranslateDefaultConfiguraOption, TranslateResponseOption } from \"../core/engine\";\nimport { HttpClient, HttpClientInstance } from \"../http/adapter\";\n\nexport enum DeeplxLanguage {\n  ZH = 'ZH',\n  EN = 'EN'\n}\n\nexport interface DeeplxDefaultConfiguraOption extends TranslateDefaultConfiguraOption {\n  url: string\n  authorization: string\n  timeout?: number\n}\n\nexport class DeeplxTranslateEngine implements ITranslateEngine {\n\n  private src;\n  private target;\n  private languageMap;\n\n  private url;\n  private authorization;\n  private http: HttpClientInstance;\n\n  constructor(options: DeeplxDefaultConfiguraOption) {\n\n    if (!options.url) {\n      throw new Error('The deeplx translation address cannot be emptry')\n    }\n\n    if (!options.authorization) {\n      throw new Error('The deeplx request token cannot be emptry')\n    }\n\n    if (!options.src) {\n      throw new Error('The source language cannot be emptry')\n    }\n\n    if (!options.target) {\n      throw new Error('The target language cannot be emptry')\n    }\n\n    this.src = options.src || DeeplxLanguage.ZH\n    this.target = options.target || DeeplxLanguage.EN\n    this.languageMap = options.languageMap || {}\n\n    this.url = options.url;\n    this.authorization = options.authorization;\n    this.http = HttpClient.create({\n      timeout: options.timeout\n    })\n  }\n\n  /**\n   * 根据配置信息获取本地语言映射表映射标识\n   * @param options 配置信息\n   * @returns \n   */\n  private getLocalTranslateLanguageMapKeyByOption(options: TranslateConfigOption): string {\n    return `${options.src || this.src}-${options.target || this.target}`;\n  }\n\n  /**\n   * 根据key获取本地语言映射表信息\n   * @param key 映射标识 格式：[srcource language]-[target language]\n   * @returns \n   */\n  private getLocalTranslateLanguageMapInfoByKey(key: string): Array<LanguageMapItemInfo> {\n    return (this.languageMap[key] || []).sort((v1, v2) => {\n      const width1 = v1.weight == undefined ? 0 : v1.weight\n      const width2 = v2.weight == undefined ? 0 : v2.weight\n      return width2 - width1;\n    })\n  }\n\n  /**\n   * 发送翻译请求\n   * @param text 需要翻译的文本\n   * @param src 源语言\n   * @param target 目标语言\n   * @returns \n   */\n  private requestTranslate(text: string, src: DeeplxLanguage | string, target: DeeplxLanguage | string) {\n    return this.http.post<TranslateResponseOption>(this.url,\n      {\n        \"text\": text,\n        \"source_lang\": src || this.src,\n        \"target_lang\": target || this.target\n      }, {\n      headers: {\n        'Authorization': this.authorization\n      }\n    })\n  }\n\n  /**\n   * 根据本地语言映射表标记原始文本\n   * @param localLanguageMapInfo \n   * @param info \n   * @returns \n   */\n  encodeTranslateMapping(localLanguageMapInfo: Array<LanguageMapItemInfo>, info: TranslateConfigOption): TranslateConfigOption {\n\n    info = JSON.parse(JSON.stringify(info));\n    let text = info.text || '';\n\n    localLanguageMapInfo.forEach((map, index) => {\n      text = text.replace(map.src, '${' + index + '}')\n    })\n\n    info.text = text;\n    return info;\n  }\n\n\n  /**\n   * 根据本地语言映射表解析翻译结果\n   * @param key 映射标识\n   * @param responseText 翻译响应结果文本\n   * @returns \n   */\n  decodeTranslateMapping(localLanguageMapInfo: Array<LanguageMapItemInfo>, responseText: string): string {\n    localLanguageMapInfo.forEach((item, index) => {\n      responseText = responseText.replace('${' + index + '}', item.target)\n    })\n    return responseText;\n  }\n\n  /**\n   * 单个翻译\n   * @param options \n   */\n  singleTranslate(options: TranslateConfigOption): Promise<TranslateResponseOption> {\n    return new Promise((resolve, reject) => {\n\n      //是否是需要忽略翻译的文本\n      const ignore = options.text == null || options.text == undefined || options.text.length <= 0 || !Number.isNaN(Number(options.text))\n      if (ignore) {\n        return resolve({\n          alternatives: null,\n          data: options.text || '',\n          id: options.id,\n          success: false\n        })\n      }\n\n      const targetLanguageMapInfo = this.getLocalTranslateLanguageMapInfoByKey(this.getLocalTranslateLanguageMapKeyByOption(options))\n\n      const _options = this.encodeTranslateMapping(targetLanguageMapInfo, options)\n\n      this.requestTranslate(_options.text || '', _options.src, _options.target).then((res) => {\n        resolve(res.code == 200 && res.data?.data ? {\n          alternatives: (res.data || {}).alternatives || null,\n          data: this.decodeTranslateMapping(targetLanguageMapInfo, res.data?.data || ''),\n          id: options.id || '',\n          success: true\n        } : {\n          alternatives: null,\n          data: options.text || '',\n          id: options.id || '',\n          success: false\n        }\n        )\n\n      })\n    })\n  }\n\n  /**\n   * 批量翻译\n   * @param options \n   */\n  branchTranslate(options: Array<TranslateConfigOption>): Promise<Array<TranslateResponseOption>> {\n\n    return new Promise((resolve, reject) => {\n\n      const requestList: Array<TranslateResponseOption> = []\n\n      Promise.all(options.map(info => this.singleTranslate(info))).then((res) => {\n        requestList.push(...res)\n      }).finally(() => {\n        resolve(requestList)\n      })\n\n    })\n\n  }\n\n\n  /**\n   * \n   * @param options Translation Configura Option\n   * @returns If options dont instance of array,or options length is one return `Pormise<TranslateResponseOption>`,\n   * otherwise return `Promise<Array<TranslateResponseOption>>` type\n   * \n   */\n  translate(options: TranslateConfigOption | Array<TranslateConfigOption>): Promise<TranslateResponseOption> | Promise<Array<TranslateResponseOption>> {\n    return !(options instanceof Array) ? this.singleTranslate(options) : options.length == 1 ? this.singleTranslate(options[0]) : this.branchTranslate(options)\n  }\n\n}\n\nexport default {}","\nimport HttpClient, { HtptClientResponseOption, HttpClientInstance } from '../http/adapter'\n\n/**\n * 语言词典库——单项词典信息\n */\nexport interface LanguageMapItemInfo {\n  src: string\n  target: string\n  weight?: number\n}\n\n/**\n * 默认翻译语言配置\n */\nexport interface TranslateDefaultConfiguraOption {\n  src: string\n  target: string\n  languageMap?: { [name: string]: Array<LanguageMapItemInfo> }\n}\n\n/**\n * 翻译配置\n */\nexport interface TranslateConfigOption extends TranslateDefaultConfiguraOption {\n  text?: string\n  id: string | number\n}\n\n/**\n * 翻译响应信息\n */\nexport interface TranslateResponseOption {\n  alternatives: Array<string> | null\n  data: string\n  id: string | number\n  success: Boolean\n}\n\n/**\n * 翻译引擎接口类\n */\nexport interface ITranslateEngine {\n  translate(options: TranslateConfigOption | Array<TranslateConfigOption>): Promise<TranslateResponseOption> | Promise<Array<TranslateResponseOption>>;\n  singleTranslate(options: TranslateConfigOption): Promise<TranslateResponseOption>\n  branchTranslate(options: Array<TranslateConfigOption>): Promise<Array<TranslateResponseOption>>\n}\n\nexport class TranslateEngineInstance implements ITranslateEngine {\n  private _engine: ITranslateEngine;\n\n  constructor(enine: ITranslateEngine) {\n    this._engine = enine\n  }\n\n  singleTranslate(options: TranslateConfigOption): Promise<TranslateResponseOption> {\n    return this._engine.singleTranslate(options)\n  }\n  \n  branchTranslate(options: TranslateConfigOption[]): Promise<TranslateResponseOption[]> {\n    return this._engine.branchTranslate(options)\n  }\n\n  translate(options: TranslateConfigOption | TranslateConfigOption[]): Promise<TranslateResponseOption> | Promise<TranslateResponseOption[]> {\n    return this._engine.translate(options)\n  }\n\n}","import { LanguageMapItemInfo, TranslateConfigOption, TranslateEngineInstance } from '../../lib/core/engine';\nimport { PluginDefaultConfiguraOption } from '../index';\n\n/**\n * translation queue item options\n */\ninterface TranslationQueueItemOption {\n  text: string\n  src?: string\n  target?: string\n  languageMap?: { [name: string]: Array<LanguageMapItemInfo> },\n  translate: boolean\n  el: HTMLElement\n}\n\ninterface TranslateRequestQueueItemOption {\n  src: TranslationQueueItemOption\n  encodeText: string\n}\n\n/**\n * translation queue\n */\n\nclass TranslationQueue {\n  private _waitingQueue: Array<TranslationQueueItemOption> = [];//waiting queue\n  private _requestQueue: Array<TranslationQueueItemOption> = [];//request queue\n  \n  private _engine: TranslateEngineInstance;\n  private _timer: NodeJS.Timeout | null = null;\n\n  constructor(engine: TranslateEngineInstance) {\n    this._engine = engine\n  }\n\n  /**\n   * added translation queue item\n   * @param options one or more queue options\n   * @returns \n   */\n  add(...options: Array<TranslationQueueItemOption>) {\n\n    this._waitingQueue.push(...options)\n\n    if (this._timer != null) clearTimeout(this._timer);\n    this._timer = setTimeout(() => {\n      this._requestQueue = this._waitingQueue;\n      this._waitingQueue = [];\n      this.request()\n    }, 200)\n  }\n\n  request() {\n\n    const requestList: Array<TranslateConfigOption> = []\n\n    const requestQueue: Array<TranslateRequestQueueItemOption> = this._requestQueue.map((info, i1) => {\n\n      let _t = info.text;\n\n      [...info.text.matchAll(/>(.*?)</g)].reduce((addIndex, rex: any, i2) => {\n\n        const id = `{${i1}_${i2}}`,\n\n          startIndex = addIndex + (rex.index || 0) + 1,\n          endIndex = rex[1].length + startIndex;\n\n        _t = _t.substring(0, startIndex) + id + _t.substring(endIndex, _t.length)\n\n        requestList.push({\n          id: `${i1}_${i2}`,\n          text: rex[1],\n          src: info.src || '',\n          target: info.target || '',\n          languageMap: info.languageMap\n        })\n\n        return addIndex - (rex[1].length - id.length)\n      }, 0)\n\n      return {\n        src: info,\n        encodeText: _t,\n      }\n\n    })\n\n    this._engine.branchTranslate(requestList).then(res => {\n\n      console.log('----res', res);\n\n\n      res.forEach(info => {\n        const ids = (info.id as string).split('_');\n        requestQueue[Number(ids[0])].encodeText = requestQueue[Number(ids[0])].encodeText.replace(`{${info.id}}`, info.data)\n      })\n\n      requestQueue.forEach(info => {\n        info.src.el.innerHTML = info.encodeText\n      })\n\n    })\n  }\n\n  /**\n   * By node element remove queue items \n   * Only remove queues with element  `request` option set to false or undefined\n   * @param el node element\n   */\n  remove(el: HTMLElement | Node) {\n    this._waitingQueue = (this._waitingQueue || []).filter(info => info.el == el)\n  }\n}\n\nlet queue: TranslationQueue;\n\nclass TranslateVuePlugin {\n\n  private _engine: TranslateEngineInstance\n\n  constructor(options: PluginDefaultConfiguraOption) {\n    if (!options.engine) {\n      throw new Error('The translation engine connot be emptry')\n    }\n\n    this._engine = new TranslateEngineInstance(options.engine);\n  }\n\n  initQueue() {\n    queue = new TranslationQueue(this._engine)\n  }\n\n  /**\n   * registe `v-nottranslate` directive\n   * @returns vue directive options\n   */\n  regsiteNotTranslateDirective() {\n    return {\n\n      /**\n       * v2.0 指令绑定到元素时\n       * @param el \n       * @param binding \n       * @param vnode \n       * @param prevVnode \n       */\n      bind(el: HTMLElement, binding: any, vnode: any, prevVnode: any) {\n        el.setAttribute('not-translate', 'true')\n        queue.add({\n          el,\n          text: el.outerHTML,\n          translate: false\n        })\n      },\n      /**\n       * v2.0 所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前\n       * @param el \n       * @param binding \n       * @param vnode \n       * @param prevVnode \n       */\n      componentUpdated(el: HTMLElement, binding: any, vnode: any, prevVnode: any) {\n        if (!el.getAttribute('not-translate')) {\n          el.setAttribute('not-translate', 'true')\n          queue.add({\n            el,\n            text: el.outerHTML,\n            translate: false,\n          })\n        }\n      },\n      /**\n       * v3.0 在绑定元素的父组,及他自己的所有子节点都挂载完成后调用\n       * @param el \n       * @param binding \n       * @param vnode \n       * @param prevVnode \n       */\n      mounted(el: HTMLElement, binding: any, vnode: any, prevVnode: any) {\n        el.setAttribute('not-translate', 'true')\n        queue.add({\n          el,\n          text: el.outerHTML,\n          translate: false,\n        })\n\n      },\n      /**\n       * v3.0 在绑定元素的父组件,及他自己的所有子节点都更新后调用\n       * @param el \n       * @param binding \n       * @param vnode \n       * @param prevVnode \n       */\n      updated(el: HTMLElement, binding: any, vnode: any, prevVnode: any) {\n        if (!el.getAttribute('not-translate')) {\n          el.setAttribute('not-translate', 'true')\n          queue.add({\n            el,\n            text: el.outerHTML,\n            translate: false,\n          })\n        }\n      },\n    }\n  }\n\n  /**\n   * registe `v-translate` directive\n   * @returns vue directive options\n   */\n  retaiteTranslateDirective() {\n    return {\n      /**\n       * [v2.0] 指令绑定到元素时\n       * @param el \n       * @param binding \n       * @param vnode \n       * @param prevVnode \n       */\n      bind: (el: HTMLElement, binding: any, vnode: any, prevVnode: any) => {\n        queue.add({\n          el,\n          text: el.outerHTML,\n          translate: true,\n          ...(binding.value || {})\n        })\n      },\n      /**\n       * [v2.0] 子组件和组件都更新完成时\n       * @param el \n       * @param binding \n       * @param vnode \n       * @param prevVnode \n       */\n      update: (el: HTMLElement, binding: any, vnode: any, prevVnode: any) => {\n        queue.add({\n          el,\n          text: el.outerHTML,\n          translate: true,\n          ...(binding.value || {})\n        })\n      },\n      /**\n       * [v2.0] 指令与元素解绑时调用\n       * @param el \n       */\n      unbind: (el: HTMLElement) => {\n        queue.remove(el)\n      },\n      /**\n       * [v3.0] 在绑定元素的父组,及他自己的所有子节点都挂载完成后调用\n       * @param el \n       * @param binding \n       * @param vnode \n       * @param prevVnode \n       */\n      mounted: (el: HTMLElement, binding: any, vnode: any, prevVnode: any) => {\n        queue.add({\n          el,\n          text: el.outerHTML,\n          translate: true,\n          ...(binding.value || {})\n        })\n      },\n      /**\n       * [v3.0] 在绑定元素的父组件,及他自己的所有子节点都更新后调用\n       * @param el \n       * @param binding \n       * @param vnode \n       * @param prevVnode \n       */\n      updated: (el: HTMLElement, binding: any, vnode: any, prevVnode: any) => {\n        queue.add({\n          el,\n          text: el.outerHTML,\n          translate: true,\n          ...(binding.value || {})\n        })\n      },\n      /**\n       * [v3.0] 绑定元素的父组件卸载前调用\n       * @param el \n       * @param binding \n       * @param vnode \n       * @param prevVnode \n       */\n      beforeUnmount: (el: HTMLElement, binding: any, vnode: any, prevVnode: any) => {\n        queue.remove(el)\n      },\n    }\n  }\n\n}\n\n\nexport default {\n  install(app: any, options: PluginDefaultConfiguraOption) {\n\n    const plugin = new TranslateVuePlugin(options)\n    plugin.initQueue()\n\n    app.directive('translate', plugin.retaiteTranslateDirective())\n    app.directive('nottranslate', plugin.regsiteNotTranslateDirective())\n\n  }\n}","// this module should only have a default export\nimport { DeeplxTranslateEngine, DeeplxLanguage } from '../engines/index'\n\nimport TranslateVuePlugin from '../../plugins/vue/index'\n\nexport default {\n  DeeplxTranslateEngine,\n  DeeplxLanguage,\n  TranslateVuePlugin\n}"],"names":["http.request","TranslateVuePlugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}